var S=Object.defineProperty;var F=(c,i,f)=>i in c?S(c,i,{enumerable:!0,configurable:!0,writable:!0,value:f}):c[i]=f;var m=(c,i,f)=>(F(c,typeof i!="symbol"?i+"":i,f),f);const P=function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))u(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const h of r.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&u(h)}).observe(document,{childList:!0,subtree:!0});function f(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerpolicy&&(r.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?r.credentials="include":o.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function u(o){if(o.ep)return;o.ep=!0;const r=f(o);fetch(o.href,r)}};P();class I{constructor(){}}class U extends I{constructor(i){super();m(this,"type");m(this,"payload");this.packet=i,this.type=i[0],this.payload=i[1]}}class M extends U{constructor(i){super(i)}}class T extends U{constructor(i){super(i);m(this,"isCanceled",!1)}}class v{constructor(i,f,u=!1){this.name=i,this.cb=f,this.once=u}}class C{constructor(){m(this,"events",[])}on(i,f){this.events.push(new v(i,f))}once(i,f){this.events.push(new v(i,f,!1))}emit(i,...f){this.events.filter(u=>{if(u.name!=i)return!0;u.cb(...f);var o=this;return o["on"+i]instanceof Function&&o["on"+i](...f),!u.once})}}function B(c){let f,u,o=new Uint8Array(128),r=0;return h(c),o.subarray(0,r);function h(n){switch(typeof n){case"undefined":p();break;case"boolean":y(n);break;case"number":a(n);break;case"string":b(n);break;case"object":n===null?p():n instanceof Date?e(n):Array.isArray(n)?g(n):n instanceof Uint8Array||n instanceof Uint8ClampedArray?d(n):n instanceof Int8Array||n instanceof Int16Array||n instanceof Uint16Array||n instanceof Int32Array||n instanceof Uint32Array||n instanceof Float32Array||n instanceof Float64Array?g(n):k(n);break}}function p(n){x(192)}function y(n){x(n?195:194)}function a(n){if(isFinite(n)&&Math.floor(n)===n)if(n>=0&&n<=127)x(n);else if(n<0&&n>=-32)x(n);else if(n>0&&n<=255)s([204,n]);else if(n>=-128&&n<=127)s([208,n]);else if(n>0&&n<=65535)s([205,n>>>8,n]);else if(n>=-32768&&n<=32767)s([209,n>>>8,n]);else if(n>0&&n<=4294967295)s([206,n>>>24,n>>>16,n>>>8,n]);else if(n>=-2147483648&&n<=2147483647)s([210,n>>>24,n>>>16,n>>>8,n]);else if(n>0&&n<=18446744073709552e3){let t=n/4294967296,l=n%4294967296;s([211,t>>>24,t>>>16,t>>>8,t,l>>>24,l>>>16,l>>>8,l])}else n>=-9223372036854776e3&&n<=9223372036854776e3?(x(211),w(n)):n<0?s([211,128,0,0,0,0,0,0,0]):s([207,255,255,255,255,255,255,255,255]);else u||(f=new ArrayBuffer(8),u=new DataView(f)),u.setFloat64(0,n),x(203),s(new Uint8Array(f))}function b(n){let t=D(n),l=t.length;l<=31?x(160+l):l<=255?s([217,l]):l<=65535?s([218,l>>>8,l]):s([219,l>>>24,l>>>16,l>>>8,l]),s(t)}function g(n){let t=n.length;t<=15?x(144+t):t<=65535?s([220,t>>>8,t]):s([221,t>>>24,t>>>16,t>>>8,t]);for(let l=0;l<t;l++)h(n[l])}function d(n){let t=n.length;t<=15?s([196,t]):t<=65535?s([197,t>>>8,t]):s([198,t>>>24,t>>>16,t>>>8,t]),s(n)}function k(n){let t=0;for(let l in n)t++;t<=15?x(128+t):t<=65535?s([222,t>>>8,t]):s([223,t>>>24,t>>>16,t>>>8,t]);for(let l in n)h(l),h(n[l])}function e(n){let t=n.getTime()/1e3;if(n.getMilliseconds()===0&&t>=0&&t<4294967296)s([214,255,t>>>24,t>>>16,t>>>8,t]);else if(t>=0&&t<17179869184){let l=n.getMilliseconds()*1e6;s([215,255,l>>>22,l>>>14,l>>>6,l<<2>>>0|t/4294967296,t>>>24,t>>>16,t>>>8,t])}else{let l=n.getMilliseconds()*1e6;s([199,12,255,l>>>24,l>>>16,l>>>8,l]),w(t)}}function x(n){if(o.length<r+1){let t=o.length*2;for(;t<r+1;)t*=2;let l=new Uint8Array(t);l.set(o),o=l}o[r]=n,r++}function s(n){if(o.length<r+n.length){let t=o.length*2;for(;t<r+n.length;)t*=2;let l=new Uint8Array(t);l.set(o),o=l}o.set(n,r),r+=n.length}function w(n){let t,l;n>=0?(t=n/4294967296,l=n%4294967296):(n++,t=Math.abs(n)/4294967296,l=Math.abs(n)%4294967296,t=~t,l=~l),s([t>>>24,t>>>16,t>>>8,t,l>>>24,l>>>16,l>>>8,l])}}function L(c){let f=0;if(c instanceof ArrayBuffer&&(c=new Uint8Array(c)),typeof c!="object"||typeof c.length=="undefined")throw new Error("Invalid argument type: Expected a byte array (Array or Uint8Array) to deserialize.");if(!c.length)throw new Error("Invalid argument: The byte array to deserialize is empty.");c instanceof Uint8Array||(c=new Uint8Array(c));let u=o();return f<c.length,u;function o(){const e=c[f++];if(e>=0&&e<=127)return e;if(e>=128&&e<=143)return a(e-128);if(e>=144&&e<=159)return b(e-144);if(e>=160&&e<=191)return g(e-160);if(e===192)return null;if(e===193)throw new Error("Invalid byte code 0xc1 found.");if(e===194)return!1;if(e===195)return!0;if(e===196)return y(-1,1);if(e===197)return y(-1,2);if(e===198)return y(-1,4);if(e===199)return d(-1,1);if(e===200)return d(-1,2);if(e===201)return d(-1,4);if(e===202)return p(4);if(e===203)return p(8);if(e===204)return h(1);if(e===205)return h(2);if(e===206)return h(4);if(e===207)return h(8);if(e===208)return r(1);if(e===209)return r(2);if(e===210)return r(4);if(e===211)return r(8);if(e===212)return d(1);if(e===213)return d(2);if(e===214)return d(4);if(e===215)return d(8);if(e===216)return d(16);if(e===217)return g(-1,1);if(e===218)return g(-1,2);if(e===219)return g(-1,4);if(e===220)return b(-1,2);if(e===221)return b(-1,4);if(e===222)return a(-1,2);if(e===223)return a(-1,4);if(e>=224&&e<=255)return e-256;throw console.debug("msgpack array:",c),new Error("Invalid byte value '"+e+"' at index "+(f-1)+" in the MessagePack binary data (length "+c.length+"): Expecting a range of 0 to 255. This is not a byte array.")}function r(e){let x=0,s=!0;for(;e-- >0;)if(s){let w=c[f++];x+=w&127,w&128&&(x-=128),s=!1}else x*=256,x+=c[f++];return x}function h(e){let x=0;for(;e-- >0;)x*=256,x+=c[f++];return x}function p(e){let x=new DataView(c.buffer,f,e);if(f+=e,e===4)return x.getFloat32(0,!1);if(e===8)return x.getFloat64(0,!1)}function y(e,x){e<0&&(e=h(x));let s=c.subarray(f,f+e);return f+=e,s}function a(e,x){e<0&&(e=h(x));let s={};for(;e-- >0;){let w=o();s[w]=o()}return s}function b(e,x){e<0&&(e=h(x));let s=[];for(;e-- >0;)s.push(o());return s}function g(e,x){e<0&&(e=h(x));let s=f;return f+=e,O(c,s,e)}function d(e,x){e<0&&(e=h(x));let s=h(1),w=y(e);switch(s){case 255:return k(w)}return{type:s,data:w}}function k(e){if(e.length===4){let x=(e[0]<<24>>>0)+(e[1]<<16>>>0)+(e[2]<<8>>>0)+e[3];return new Date(x*1e3)}if(e.length===8){let x=(e[0]<<22>>>0)+(e[1]<<14>>>0)+(e[2]<<6>>>0)+(e[3]>>>2),s=(e[3]&3)*4294967296+(e[4]<<24>>>0)+(e[5]<<16>>>0)+(e[6]<<8>>>0)+e[7];return new Date(s*1e3+x/1e6)}if(e.length===12){let x=(e[0]<<24>>>0)+(e[1]<<16>>>0)+(e[2]<<8>>>0)+e[3];f-=8;let s=r(8);return new Date(s*1e3+x/1e6)}throw new Error("Invalid data length for a date value.")}}function D(c){let i=!0,f=c.length;for(let r=0;r<f;r++)if(c.charCodeAt(r)>127){i=!1;break}let u=0,o=new Uint8Array(c.length*(i?1:4));for(let r=0;r!==f;r++){let h=c.charCodeAt(r);if(h<128){o[u++]=h;continue}if(h<2048)o[u++]=h>>6|192;else{if(h>55295&&h<56320){if(++r>=f)throw new Error("UTF-8 encode: incomplete surrogate pair");let p=c.charCodeAt(r);if(p<56320||p>57343)throw new Error("UTF-8 encode: second surrogate character 0x"+p.toString(16)+" at index "+r+" out of range");h=65536+((h&1023)<<10)+(p&1023),o[u++]=h>>18|240,o[u++]=h>>12&63|128}else o[u++]=h>>12|224;o[u++]=h>>6&63|128}o[u++]=h&63|128}return i?o:o.subarray(0,u)}function O(c,i,f){let u=i,o="";for(f+=i;u<f;){let r=c[u++];if(r>127)if(r>191&&r<224){if(u>=f)throw new Error("UTF-8 decode: incomplete 2-byte sequence");r=(r&31)<<6|c[u++]&63}else if(r>223&&r<240){if(u+1>=f)throw new Error("UTF-8 decode: incomplete 3-byte sequence");r=(r&15)<<12|(c[u++]&63)<<6|c[u++]&63}else if(r>239&&r<248){if(u+2>=f)throw new Error("UTF-8 decode: incomplete 4-byte sequence");r=(r&7)<<18|(c[u++]&63)<<12|(c[u++]&63)<<6|c[u++]&63}else throw new Error("UTF-8 decode: unknown multibyte start 0x"+r.toString(16)+" at index "+(u-1));if(r<=65535)o+=String.fromCharCode(r);else if(r<=1114111)r-=65536,o+=String.fromCharCode(r>>10|55296),o+=String.fromCharCode(r&1023|56320);else throw new Error("UTF-8 decode: code point 0x"+r.toString(16)+" exceeds UTF-16 reach")}return o}const R={encode:B,decode:L};var j=Object.freeze(Object.defineProperty({__proto__:null,msgpack:R},Symbol.toStringTag,{value:"Module"})),N=j;const A=N.msgpack;class q extends C{constructor(){super();m(this,"socket",null);var i=this;class f extends WebSocket{constructor(o){super(o);this.send=r=>{const h=new T(A.decode(new Uint8Array(r)));i.onPacketSend(h)||(i.emit("packetSend",h),super.send(r))},i.socket=this,i.initSocket()}}Object.defineProperty(window,"WebSocket",{value:f})}initSocket(){var i;(i=this.socket)==null||i.addEventListener("message",f=>{const u=new M(A.decode(new Uint8Array(f.data)));this.emit("packetReceive",u),this.onPacketReceive(u)})}onPacketSend(i){return!1}onPacketReceive(i){}sendRaw(i){var f;(f=this.socket)==null||f.send(A.encode(i))}sendBasic(i,...f){this.sendRaw([i,f])}}const E=new q;E.on("packetReceive",c=>{c.type=="io-init"&&E.sendBasic("sp",{name:"helloworld",skin:3,moofol:1})});
